{% extends "base.jinja" %}
{% block title %}
  {{ super() }} | {{ ftl_get_message("hashtag-discovery") }}
{% endblock title %}
{% block content %}
  <div class="center">
    <h2>{{ ftl_get_message("hashtag-discovery") }}</h2>

    <div class="hashtag-discovery-controls">
      <form method="get" action="/hashtags" class="hashtag-search-form">
        <input type="text"
               name="q"
               placeholder="{{ ftl_get_message("hashtag-search-placeholder") }}"
               value="{% if search_query %}{{ search_query }}{% endif %}"
               class="hashtag-search-input" />
        <button type="submit">{{ ftl_get_message("search") }}</button>
      </form>

      {% if not search_query %}
        <div class="hashtag-sort-controls">
          <span>{{ ftl_get_message("sort-by") }}:</span>
          <a href="/hashtags?sort=trending" class="{% if sort_by == 'trending' %}active{% endif %}">
            {{ ftl_get_message("sort-trending") }}
          </a>
          <a href="/hashtags?sort=popular" class="{% if sort_by == 'popular' %}active{% endif %}">
            {{ ftl_get_message("sort-popular") }}
          </a>
          <a href="/hashtags?sort=recent" class="{% if sort_by == 'recent' %}active{% endif %}">
            {{ ftl_get_message("sort-recent") }}
          </a>
          <a href="/hashtags?sort=alphabetical" class="{% if sort_by == 'alphabetical' %}active{% endif %}">
            {{ ftl_get_message("sort-alphabetical") }}
          </a>
        </div>
      {% endif %}
    </div>

    {% if search_query %}
      <p class="hashtag-search-info">
        {{ ftl_get_message("search-results-for") }} "<strong>{{ search_query }}</strong>"
      </p>
    {% endif %}

    {% if hashtags %}
      <div class="hashtag-discovery-grid">
        {% for hashtag in hashtags %}
          <div class="hashtag-discovery-item">
            <a href="/hashtags/{{ hashtag.name }}">
              <span class="hashtag-name">#{{ hashtag.display_name }}</span>
              <span class="hashtag-count">{{ hashtag.post_count }} {{ ftl_get_message("hashtag-post-count") }}</span>
            </a>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p>{{ ftl_get_message("no-hashtags-found") }}</p>
    {% endif %}
  </div>
{% endblock content %}
