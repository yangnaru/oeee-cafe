{% macro comment_card(comment, r2_public_endpoint_url, ftl_get_message) %}
  <div class="comment-card-link" onclick="if(event.target.tagName !== 'A') { window.location.href='/@{{ comment.post_author_login_name }}/{{ comment.post_id }}'; }">
    <div class="comment">
      {% if comment.post_image_filename %}
        <div class="comment-thumbnail">
          <img src="{{ r2_public_endpoint_url }}/image/{{ comment.post_image_filename[:2] }}/{{ comment.post_image_filename }}"
               alt="{{ comment.post_title }}"
               width="{{ comment.post_image_width }}"
               height="{{ comment.post_image_height }}"
               loading="lazy"
               decoding="async">
        </div>
      {% endif %}
      <div class="comment-body">
        <div class="comment-header">
          <span class="comment-author">{{ comment.actor_name }}</span>
          <span class="muted comment-handle">{{ comment.actor_handle }}</span>
          <span class="muted comment-timestamp">{{ comment.created_at|datetimeformat(format="short", tz="Asia/Seoul") }}</span>
        </div>
        <div class="comment-content">
          {% if comment.content_html %}
            {{ comment.content_html|safe }}
          {% else %}
            {{ comment.content|markdown|safe }}
          {% endif %}
        </div>
        {% if comment.post_title %}
          <div class="comment-post-reference">
            → {{ comment.post_title }}
          </div>
        {% else %}
          <div class="comment-post-reference">
            → {{ ftl_get_message("post-no-title") }}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
{% endmacro %}
